# Описание работы
Этот проект использует Docker Compose для развертывания Apache Airflow с базой данных PostgreSQL. Он включает в себя несколько сервисов, которые работают вместе для управления и выполнения рабочих процессов.

## Структура проекта
Проект состоит из следующих сервисов:

* postgres: Сервис базы данных, использующий образ PostgreSQL.

* airflow-init: Инициализирующий сервис, который настраивает базу данных Airflow и создает администратора.

* airflow-webserver: Веб-сервер Airflow, предоставляющий интерфейс для управления рабочими процессами.

* airflow-scheduler: Планировщик Airflow, который отвечает за выполнение задач.

## Шаги по запуску

1. Убедиться, что установлены Docker и Docker Compose:
Проверить установку с помощью команд:
``` bash
docker --version
docker-compose --version
```

2. Создать файл .env:
В корне проекта создать файл .env и заполнить переменные:
``` text
POSTGRES_USER=airflow
POSTGRES_PASSWORD=airflow
POSTGRES_DB=airflow

AIRFLOW_ADMIN_USER=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW_ADMIN_EMAIL=admin_example@com
AIRFLOW_EXECUTOR=LocalExecutor 
AIRFLOW_HOME=/opt/airflow
```

3. Запустить проект:
Перейти в директорию проекта и выполнить команду:
``` bash
docker-compose up --build
```
Это соберет образы и запустит контейнеры, выводя логи в терминале.

4. Получить доступ к веб-интерфейсу Airflow:
Открыть браузер и перейти по адресу:
``` text
http://localhost:8080
```
Войти с учетными данными из файла .env.

5. Остановить проект:
После работы остановить контейнеры командой:
``` bash
docker-compose down
```

## Ответы на вопросы
### Можно ли ограничивать ресурсы (например, память или CPU) для сервисов в docker-compose.yml? Если нет, то почему, если да, то как?
Да, можно ограничивать ресурсы (даже делать лимит не только сверху, но и снизу).
```yaml
services:
  app:
    image: some_image
    deploy:
      resources:
        limits:
          cpus: '0.5'   # Ограничение сверху по количеству ядер
          memory: 512M  # Ограничение сверху по оперативной памяти
        reservations:
          cpus: '0.25'  # Ограничение снизу (столько минимально резервируется под этот сервис)
          memory: 256M  # Резерв оперативной памяти
```

### Как можно запустить только определенный сервис из docker-compose.yml, не запуская остальные?
`docker-compose up` поднимет нам все сервисы. Чтобы такого избежать, можно поднимать сервисы выборочно через прописывание в аргументах конкретных сервисов

```bash
docker-compose up service_name service_name2
```
